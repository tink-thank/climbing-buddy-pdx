!function e(t,n,a){function i(o,l){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,a)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(e,t){var n=e("../models/posting.js"),a=Thorax.Collection.extend({name:"Postings Collection",model:n,url:function(){return"/posts"+(this.id?"/"+this.id:"")},comparator:function(e){return-e.get("timeStamp")}});t.exports=a},{"../models/posting.js":3}],2:[function(e){var t=e("./collections/postings.js"),n=e("./views/form-view.js"),a=e("./views/posting-collection-view.js"),i=e("./models/topbar.js"),r=e("./views/topbar-view.js");$(function(){var e=Backbone.Router.extend({}),o=new e;Backbone.history.start();var l=new t;l.fetch();{var s=(new n({collection:l}),new a({collection:l})),c=new i;new r({model:c})}o.route("circuit-ne","showNE",function(){s.collection.forEach(function(e){if("Circuit NE"===e.get("climbGym")){var t=e.cid;$("div[data-model-cid="+t+"]").show()}else{var t=e.cid;$("div[data-model-cid="+t+"]").hide()}})}),o.route("circuit-sw","showSW",function(){s.collection.forEach(function(e){if("Circuit SW"===e.get("climbGym")){var t=e.cid;$("div[data-model-cid="+t+"]").show()}else{var t=e.cid;$("div[data-model-cid="+t+"]").hide()}})}),o.route("prg","showPRG",function(){s.collection.forEach(function(e){if("Portland Rock Gym"===e.get("climbGym")){var t=e.cid;$("div[data-model-cid="+t+"]").show()}else{var t=e.cid;$("div[data-model-cid="+t+"]").hide()}})}),o.route("","showALL",function(){s.collection.forEach(function(e){var t=e.cid;$("div[data-model-cid="+t+"]").show()})});var d={};window.app=d,d.postings=l})},{"./collections/postings.js":1,"./models/topbar.js":4,"./views/form-view.js":5,"./views/posting-collection-view.js":6,"./views/topbar-view.js":8}],3:[function(e,t){var n=Thorax.Model.extend({name:"Posting Model",urlRoot:"/posts",initialize:function(){this.save()}});t.exports=n},{}],4:[function(e,t){var n=Thorax.Model.extend({url:"/user"});t.exports=n},{}],5:[function(e,t){var n=e("../../templates/form.handlebars"),a=Thorax.View.extend({template:n,name:"Form View",el:"#sidebar",events:{"click #posting-submit-button":"newPosting","keypress #climb-details":"createOnEnter"},initialize:function(){this.render()},postingIdMaker:function(){return Math.floor(1e9*Math.random())},createOnEnter:function(){},newPosting:function(){var e=this;$.getJSON("/user",function(t){var n={gym:$("#climb-gym").val(),eta:$("#climb-eta").val(),duration:$("#climb-duration").val(),details:$("#climb-details").val().trim()},a=e.postingIdMaker();"null"!=n.gym&&"null"!=n.eta&&"null"!=n.duration?(e.collection.create({postingId:a,title:"posting-"+a,timeStamp:Date.now(),userName:t.displayName,userImg:t.avatar,climbGym:n.gym,climbEta:n.eta,climbDuration:n.duration,climbDetails:n.details,replies:[],id:a}),$("#climb-gym").val(""),$("#climb-eta").val(""),$("#climb-duration").val(""),$("#climb-details").val(""),$("#wrapper").toggleClass("active")):e.$el.find(".text-danger").html("**VALIDATION FAIL**").fadeOut(0).fadeIn(250).fadeOut(1e3)})}});t.exports=a},{"../../templates/form.handlebars":9}],6:[function(e,t){var n=e("../../templates/posting.handlebars"),a=e("../../templates/loading.handlebars"),i=e("./posting-view"),r=(e("../models/posting.js"),Thorax.CollectionView.extend({itemTemplate:n,itemView:i,loadingTemplate:a,name:"Postings Collection View",el:"#main",initialize:function(){this.render()}}));t.exports=r},{"../../templates/loading.handlebars":10,"../../templates/posting.handlebars":11,"../models/posting.js":3,"./posting-view":7}],7:[function(e,t){var n=Thorax.View.extend({template:Handlebars.compile("{{collection}}"),name:"posting-view",context:function(){return this.model.attributes},initialize:function(){this.render(),this.listenTo(this.model,"change",this.render)},events:{"click .posting-reply-button":"addReply"},edit:function(){this.$el.addClass("orange")},removeOrange:function(){this.$el.removeClass("orange")},addReply:function(){var e=this,t=this.$el.find(".posting-reply").val();t?$.getJSON("/user",function(n){var a=_.clone(e.model.get("replies"));a.push({userName:n.displayName,userImg:n.avatar,message:t,time:(new Date).toDateString(),timeStamp:Date.now()}),e.model.save({replies:a}),e.$el.find(".posting-reply").val("")}):e.$el.find(".text-danger").html("**VALIDATION FAIL**").fadeOut(0).fadeIn(250).fadeOut(1e3)}});t.exports=n},{}],8:[function(e,t){var n=e("../../templates/topbar.handlebars"),a=Thorax.View.extend({template:n,el:"#top-bar",initialize:function(){this.render()}});t.exports=a},{"../../templates/topbar.handlebars":12}],9:[function(e,t){var n=e("handlebars/runtime").default.template;t.exports=n(function(e,t,n,a,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="sidebar-group">\r\n  <div class="row">\r\n    <div id ="top-bar"></div>\r\n  </div>\r\n  \r\n  <div class="row sidebar-guy">\r\n    <div class="dropdown">\r\n      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Search by Gym <i class="fa fa-caret-down"></i></a>\r\n      <ul class="dropdown-menu">\r\n        <li><a href="#circuit-ne">The Circuit NE</a></li>\r\n        <li><a href="#circuit-sw">The Circuit SW</a></li>\r\n        <li><a href="#prg">Portland Rock Gym</a></li>\r\n        <li class="divider"></li>\r\n        <li><a href="#">Reset</a></li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n  \r\n  <div class="row sidebar-guy">\r\n    <select class="form-control form-inline" id="climb-gym" name="climb-gym">\r\n      <option value="null">I\'m climbing at:</option>\r\n      <option value="Circuit NE">The Circuit NE</option>\r\n      <option value="Circuit SW">The Circuit SW</option>\r\n      <option value="Portland Rock Gym">Portland Rock Gym</option>\r\n    </select>\r\n    <select class="form-control form-inline" id="climb-eta" name="climb-eta">\r\n      <option value="null">I\'m going in:</option>\r\n      <option value="0">Now!</option>\r\n      <option value="15">15 minutes</option>\r\n      <option value="30">30 minutes</option>\r\n      <option value="45">45 minutes</option>\r\n      <option value="60">1 hour</option>\r\n    </select>\r\n    <select class="form-control form-inline" id="climb-duration" name="climb-duration">\r\n      <option value="null">I\'m climbing for:</option>\r\n      <option value="30">30 minutes</option>\r\n      <option value="60">1 hour</option>\r\n      <option value="90">1.5 hours</option>\r\n      <option value="120">2 hours</option>\r\n    </select>\r\n    <textarea class="form-control" rows="3" type="text" id="climb-details" name="climb-details" placeholder="Leave some details here..."></textarea>\r\n    <br>\r\n    <div class="submit-line"><button class="btn btn-primary" id="posting-submit-button">Climb on!</button><button class="btn btn-link text-danger"></button></div>\r\n  </div>\r\n  \r\n\r\n  \r\n</div>\r\n'})},{"handlebars/runtime":19}],10:[function(e,t){var n=e("handlebars/runtime").default.template;t.exports=n(function(e,t,n,a,i){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{},'<div class="panel panel-default panel-posting">  \n  <div class="panel-heading">\n    <p>Loading...</p>\n  </div>\n</div>'})},{"handlebars/runtime":19}],11:[function(e,t){var n=e("handlebars/runtime").default.template;t.exports=n(function(e,t,n,a,i){function r(e,t){var a,i="";return i+='\n  <div class="panel-body">\n    ',a=n.each.call(e,e&&e.replies,{hash:{},inverse:h.noop,fn:h.program(2,o,t),data:t}),(a||0===a)&&(i+=a),i+="\n  </div>\n  "}function o(e,t){var a,i,r="";return r+='\n    <div class="media panel-reply">\n      <a class="pull-left">\n        <img class="media-object" src="',(i=n.userImg)?a=i.call(e,{hash:{},data:t}):(i=e&&e.userImg,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=u(a)+'">\n      </a>\n      <div class="media-body panel-small-text">\n        <div><a><strong class="media-heading">',(i=n.userName)?a=i.call(e,{hash:{},data:t}):(i=e&&e.userName,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=u(a)+"</strong></a> ",(i=n.message)?a=i.call(e,{hash:{},data:t}):(i=e&&e.message,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=u(a)+"</div>\n        <em><p>",(i=n.time)?a=i.call(e,{hash:{},data:t}):(i=e&&e.time,a=typeof i===p?i.call(e,{hash:{},data:t}):i),r+=u(a)+"</p></em>\n      </div>                    \n    </div>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var l,s,c,d="",p="function",u=this.escapeExpression,h=this,m=n.helperMissing;return d+=u((s=n.view||t&&t.view,c={hash:{},data:i},s?s.call(t,t&&t.collection,c):m.call(t,"view",t&&t.collection,c)))+'\n<div class="panel panel-default panel-posting fade-in">\n  \n  <div class="panel-heading">                  \n    <div class="row panel-small-text dropdown">\n      <a href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="',(s=n.userImg)?l=s.call(t,{hash:{},data:i}):(s=t&&t.userImg,l=typeof s===p?s.call(t,{hash:{},data:i}):s),d+=u(l)+'" /></a>\n      <p>\n        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><strong>',(s=n.userName)?l=s.call(t,{hash:{},data:i}):(s=t&&t.userName,l=typeof s===p?s.call(t,{hash:{},data:i}):s),d+=u(l)+"</strong></a>\n        <em><br>@ ",(s=n.climbGym)?l=s.call(t,{hash:{},data:i}):(s=t&&t.climbGym,l=typeof s===p?s.call(t,{hash:{},data:i}):s),d+=u(l)+"<br>in ",(s=n.climbEta)?l=s.call(t,{hash:{},data:i}):(s=t&&t.climbEta,l=typeof s===p?s.call(t,{hash:{},data:i}):s),d+=u(l)+" minutes for a ",(s=n.climbDuration)?l=s.call(t,{hash:{},data:i}):(s=t&&t.climbDuration,l=typeof s===p?s.call(t,{hash:{},data:i}):s),d+=u(l)+' minute session.</em> \n      </p>\n      <div class="dropdown-menu">\n        <div class="dropdown-inner">\n          <strong>',(s=n.userName)?l=s.call(t,{hash:{},data:i}):(s=t&&t.userName,l=typeof s===p?s.call(t,{hash:{},data:i}):s),d+=u(l)+'</strong>\n          <p>More info eventually!</p>          \n        </div>        \n      </div>\n    </div>\n    <div class="row panel-message">\n      <p>',(s=n.climbDetails)?l=s.call(t,{hash:{},data:i}):(s=t&&t.climbDetails,l=typeof s===p?s.call(t,{hash:{},data:i}):s),d+=u(l)+"</p>\n    </div>\n  </div>\n\n  ",l=n["if"].call(t,t&&t.replies,{hash:{},inverse:h.noop,fn:h.program(1,r,i),data:i}),(l||0===l)&&(d+=l),d+='\n  \n  <div class="panel-footer">\n    <textarea class="form-control posting-reply" rows="1" type="text" name="posting-reply" placeholder="Maybe we should meet up..."></textarea>\n    <div class="submit-line"><button class="btn btn-default posting-reply-button" type="submit">Reply</button><button class="btn btn-link text-danger"></p></div>\n  </div>\n\n</div>\n\n<!--\n<div class="dropdown">\n      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown Tester <i class="fa fa-caret-down"></i></a>\n      <div class="dropdown-menu">\n        <div class="dropdown-inner">\n          <strong>',(s=n.displayName)?l=s.call(t,{hash:{},data:i}):(s=t&&t.displayName,l=typeof s===p?s.call(t,{hash:{},data:i}):s),d+=u(l)+"</strong>\n          <p>"+u((l=t&&t.githubData,l=null==l||l===!1?l:l.login,typeof l===p?l.apply(t):l))+'</p>\n          <a href="/logout">Logout</a>\n        </div>        \n      </div>-->\n'})},{"handlebars/runtime":19}],12:[function(e,t){var n=e("handlebars/runtime").default.template;t.exports=n(function(e,t,n,a,i){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),i=i||{};var r,o,l="",s="function",c=this.escapeExpression;return l+='<div class="sidebar-intro dropdown">\n  <div class="panel-small-text">\n    <a href="#" class="dropdown-toggle" data-toggle="dropdown">\n      <img src="',(o=n.avatar)?r=o.call(t,{hash:{},data:i}):(o=t&&t.avatar,r=typeof o===s?o.call(t,{hash:{},data:i}):o),l+=c(r)+'">\n      ',(o=n.displayName)?r=o.call(t,{hash:{},data:i}):(o=t&&t.displayName,r=typeof o===s?o.call(t,{hash:{},data:i}):o),l+=c(r)+'      \n    </a>\n    <div class="dropdown-menu">\n      <div class="dropdown-inner">\n        <strong>',(o=n.displayName)?r=o.call(t,{hash:{},data:i}):(o=t&&t.displayName,r=typeof o===s?o.call(t,{hash:{},data:i}):o),l+=c(r)+"</strong>\n        <p>"+c((r=t&&t.githubData,r=null==r||r===!1?r:r.login,typeof r===s?r.apply(t):r))+'</p>\n        <a href="/logout">Logout</a>\n      </div>        \n    </div>\n  </div>\n</div>\n\n<!--\n<div class="dropdown">\n      <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown Tester <i class="fa fa-caret-down"></i></a>\n      <div class="dropdown-menu">\n        <div class="dropdown-inner">\n          <strong>',(o=n.displayName)?r=o.call(t,{hash:{},data:i}):(o=t&&t.displayName,r=typeof o===s?o.call(t,{hash:{},data:i}):o),l+=c(r)+"</strong>\n          <p>"+c((r=t&&t.githubData,r=null==r||r===!1?r:r.login,typeof r===s?r.apply(t):r))+'</p>\n          <a href="/logout">Logout</a>\n        </div>        \n      </div>\n    </div>-->\n'})},{"handlebars/runtime":19}],13:[function(e,t,n){"use strict";var a=e("./handlebars/base"),i=e("./handlebars/safe-string")["default"],r=e("./handlebars/exception")["default"],o=e("./handlebars/utils"),l=e("./handlebars/runtime"),s=function(){var e=new a.HandlebarsEnvironment;return o.extend(e,a),e.SafeString=i,e.Exception=r,e.Utils=o,e.VM=l,e.template=function(t){return l.template(t,e)},e},c=s();c.create=s,n["default"]=c},{"./handlebars/base":14,"./handlebars/exception":15,"./handlebars/runtime":16,"./handlebars/safe-string":17,"./handlebars/utils":18}],14:[function(e,t,n){"use strict";function a(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new l("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var a=n.inverse||function(){},i=n.fn;return u(t)&&(t=t.call(this)),t===!0?i(this):t===!1||null==t?a(this):p(t)?t.length>0?e.helpers.each(t,n):a(this):i(t)}),e.registerHelper("each",function(e,t){var n,a=t.fn,i=t.inverse,r=0,o="";if(u(e)&&(e=e.call(this)),t.data&&(n=v(t.data)),e&&"object"==typeof e)if(p(e))for(var l=e.length;l>r;r++)n&&(n.index=r,n.first=0===r,n.last=r===e.length-1),o+=a(e[r],{data:n});else for(var s in e)e.hasOwnProperty(s)&&(n&&(n.key=s,n.index=r,n.first=0===r),o+=a(e[s],{data:n}),r++);return 0===r&&(o=i(this)),o}),e.registerHelper("if",function(e,t){return u(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return u(e)&&(e=e.call(this)),o.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var a=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(a,t)})}function r(e,t){f.log(e,t)}var o=e("./utils"),l=e("./exception")["default"],s="1.3.0";n.VERSION=s;var c=4;n.COMPILER_REVISION=c;var d={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=d;var p=o.isArray,u=o.isFunction,h=o.toString,m="[object Object]";n.HandlebarsEnvironment=a,a.prototype={constructor:a,logger:f,log:r,registerHelper:function(e,t,n){if(h.call(e)===m){if(n||t)throw new l("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){h.call(e)===m?o.extend(this.partials,e):this.partials[e]=t}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(f.level<=e){var n=f.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};n.logger=f,n.log=r;var v=function(e){var t={};return o.extend(t,e),t};n.createFrame=v},{"./exception":15,"./utils":18}],15:[function(e,t,n){"use strict";function a(e,t){var n;t&&t.firstLine&&(n=t.firstLine,e+=" - "+n+":"+t.firstColumn);for(var a=Error.prototype.constructor.call(this,e),r=0;r<i.length;r++)this[i[r]]=a[i[r]];n&&(this.lineNumber=n,this.column=t.firstColumn)}var i=["description","fileName","lineNumber","message","name","number","stack"];a.prototype=new Error,n["default"]=a},{}],16:[function(e,t,n){"use strict";function a(e){var t=e&&e[0]||1,n=p;if(t!==n){if(n>t){var a=u[n],i=u[t];throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+i+").")}throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){if(!t)throw new d("No environment passed to template");var n=function(e,n,a,i,r,o){var l=t.VM.invokePartial.apply(this,arguments);if(null!=l)return l;if(t.compile){var s={helpers:i,partials:r,data:o};return r[n]=t.compile(e,{data:void 0!==o},t),r[n](a,s)}throw new d("The partial "+n+" could not be compiled when running in runtime-only mode")},a={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var a=this.programs[e];return n?a=o(e,t,n):a||(a=this.programs[e]=o(e,t)),a},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},c.extend(n,t),c.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,i){i=i||{};var r,o,l=i.partial?i:t;i.partial||(r=i.helpers,o=i.partials);var s=e.call(a,l,n,r,o,i.data);return i.partial||t.VM.checkRevision(a.compilerInfo),s}}function r(e,t,n){var a=Array.prototype.slice.call(arguments,3),i=function(e,i){return i=i||{},t.apply(this,[e,i.data||n].concat(a))};return i.program=e,i.depth=a.length,i}function o(e,t,n){var a=function(e,a){return a=a||{},t(e,a.data||n)};return a.program=e,a.depth=0,a}function l(e,t,n,a,i,r){var o={partial:!0,helpers:a,partials:i,data:r};if(void 0===e)throw new d("The partial "+t+" could not be found");return e instanceof Function?e(n,o):void 0}function s(){return""}var c=e("./utils"),d=e("./exception")["default"],p=e("./base").COMPILER_REVISION,u=e("./base").REVISION_CHANGES;n.checkRevision=a,n.template=i,n.programWithDepth=r,n.program=o,n.invokePartial=l,n.noop=s},{"./base":14,"./exception":15,"./utils":18}],17:[function(e,t,n){"use strict";function a(e){this.string=e}a.prototype.toString=function(){return""+this.string},n["default"]=a},{}],18:[function(e,t,n){"use strict";function a(e){return s[e]||"&amp;"}function i(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function r(e){return e instanceof l?e.toString():e||0===e?(e=""+e,d.test(e)?e.replace(c,a):e):""}function o(e){return e||0===e?h(e)&&0===e.length?!0:!1:!0}var l=e("./safe-string")["default"],s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,d=/[&<>"'`]/;n.extend=i;var p=Object.prototype.toString;n.toString=p;var u=function(e){return"function"==typeof e};u(/x/)&&(u=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)});var u;n.isFunction=u;var h=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===p.call(e):!1};n.isArray=h,n.escapeExpression=r,n.isEmpty=o},{"./safe-string":17}],19:[function(e,t){t.exports=e("./dist/cjs/handlebars.runtime")},{"./dist/cjs/handlebars.runtime":13}]},{},[2]);