!function e(t,n,a){function r(o,l){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return r(n?n:e)},c,c.exports,e,t,n,a)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<a.length;o++)r(a[o]);return r}({1:[function(e,t){var n=e("../models/posting.js"),a=Thorax.Collection.extend({name:"Postings Collection",model:n,url:function(){return"/posts"+(this.id?"/"+this.id:"")},comparator:function(e){return-e.get("timeStamp")}});t.exports=a},{"../models/posting.js":3}],2:[function(e){var t=e("./collections/postings.js"),n=e("./views/form-view.js"),a=e("./views/posting-collection-view.js"),r=e("./models/topbar.js"),i=e("./views/topbar-view.js");$(function(){var e=Backbone.Router.extend({}),o=new e;Backbone.history.start();var l=new t;l.fetch();{var s=(new n({collection:l}),new a({collection:l})),c=new r;new i({model:c})}o.route("circuit-ne","showNE",function(){s.collection.forEach(function(e){if("Circuit NE"===e.get("climbGym")){var t=e.cid;$("div[data-model-cid="+t+"]").show()}else{var t=e.cid;$("div[data-model-cid="+t+"]").hide()}})}),o.route("circuit-sw","showSW",function(){s.collection.forEach(function(e){if("Circuit SW"===e.get("climbGym")){var t=e.cid;$("div[data-model-cid="+t+"]").show()}else{var t=e.cid;$("div[data-model-cid="+t+"]").hide()}})}),o.route("prg","showPRG",function(){s.collection.forEach(function(e){if("Portland Rock Gym"===e.get("climbGym")){var t=e.cid;$("div[data-model-cid="+t+"]").show()}else{var t=e.cid;$("div[data-model-cid="+t+"]").hide()}})}),o.route("","showALL",function(){s.collection.forEach(function(e){var t=e.cid;$("div[data-model-cid="+t+"]").show()})});var p={};window.app=p,p.postings=l})},{"./collections/postings.js":1,"./models/topbar.js":4,"./views/form-view.js":5,"./views/posting-collection-view.js":6,"./views/topbar-view.js":8}],3:[function(e,t){var n=Thorax.Model.extend({name:"Posting Model",urlRoot:"/posts",initialize:function(){this.save()}});t.exports=n},{}],4:[function(e,t){var n=Thorax.Model.extend({url:"/user"});t.exports=n},{}],5:[function(e,t){var n=e("../../templates/form.handlebars"),a=Thorax.View.extend({template:n,name:"Form View",el:"#sidebar",events:{"click #posting-submit-button":"newPosting","keypress #climb-details":"createOnEnter"},initialize:function(){this.render()},postingIdMaker:function(){return Math.floor(1e9*Math.random())},createOnEnter:function(){},newPosting:function(){var e=this;$.getJSON("/user",function(t){var n={gym:$("#climb-gym").val(),eta:$("#climb-eta").val(),duration:$("#climb-duration").val(),details:$("#climb-details").val().trim()},a=e.postingIdMaker();e.collection.create({postingId:a,title:"posting-"+a,timeStamp:Date.now(),userName:t.displayName,userImg:t.avatar,climbGym:n.gym,climbEta:n.eta,climbDuration:n.duration,climbDetails:n.details,replies:[],id:a}),$("#climb-gym").val(""),$("#climb-eta").val(""),$("#climb-duration").val(""),$("#climb-details").val(""),$(".row-offcanvas").toggleClass("active")})}});t.exports=a},{"../../templates/form.handlebars":9}],6:[function(e,t){var n=e("../../templates/posting.handlebars"),a=e("./posting-view"),r=(e("../models/posting.js"),Thorax.CollectionView.extend({itemTemplate:n,itemView:a,name:"Postings Collection View",el:"#main",initialize:function(){this.render()}}));t.exports=r},{"../../templates/posting.handlebars":10,"../models/posting.js":3,"./posting-view":7}],7:[function(e,t){var n=Thorax.View.extend({template:Handlebars.compile("{{collection}}"),name:"posting-view",context:function(){return this.model.attributes},initialize:function(){this.render(),this.listenTo(this.model,"change",this.render)},events:{"click .posting-reply-button":"addReply","click .posting-reply":"edit","blur .posting-reply":"removeOrange"},edit:function(){this.$el.addClass("orange")},removeOrange:function(){this.$el.removeClass("orange")},addReply:function(){var e=this;$.getJSON("/user",function(t){e.$el.addClass("orange");var n=_.clone(e.model.get("replies"));n.push({userName:t.displayName,userImg:t.avatar,message:$(".orange").find(".posting-reply").val(),time:(new Date).toDateString(),timeStamp:Date.now()}),e.model.save({replies:n}),e.$el.find(".posting-reply").val(""),e.$el.removeClass("orange")})}});t.exports=n},{}],8:[function(e,t){var n=e("../../templates/topbar.handlebars"),a=Thorax.View.extend({template:n,el:"#top-bar",initialize:function(){this.render()}});t.exports=a},{"../../templates/topbar.handlebars":11}],9:[function(e,t){var n=e("handlebars/runtime").default.template;t.exports=n(function(e,t,n,a,r){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{},'<div class="panel-group">\r\n  \r\n  <div class="panel panel-default" id ="top-bar">\r\n    \r\n<!--     <div class="panel-heading">\r\n      <p class="panel-title sidebar-intro panel-small-text">\r\n        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">\r\n          <img src="http://static.ddmcdn.com/gif/loch-ness-monster.jpg">\r\n      userName<br><i class="fa fa-caret-down fa-lg"></i>\r\n        </a>\r\n      </p>\r\n    </div>\r\n    <div id="collapseOne" class="panel-collapse collapse">\r\n      <div class="panel-body sidebar-body">\r\n        \r\n        <a href="/logout">Logout</a>\r\n      </div>\r\n    </div> -->\r\n\r\n  </div>\r\n\r\n  <div class="panel panel-default">\r\n    <div class="panel-heading">\r\n      <p class="panel-title">\r\n        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">\r\n          Go Climbing!\r\n          \r\n        </a>\r\n      </p>\r\n    </div>\r\n    <div id="collapseTwo" class="panel-collapse collapse">\r\n      <div class="panel-body">\r\n        <select class="form-control form-inline" id="climb-gym" name="climb-gym">\r\n          <option value="null">I\'m Climbing at:</option>\r\n          <option value="Circuit NE">The Circuit NE</option>\r\n          <option value="Circuit SW">The Circuit SW</option>\r\n          <option value="Portland Rock Gym">Portland Rock Gym</option>\r\n        </select>\r\n        <select class="form-control form-inline" id="climb-eta" name="climb-eta">\r\n          <option value="null">I\'m going in:</option>\r\n          <option value="0">Now!</option>\r\n          <option value="15">15 minutes</option>\r\n          <option value="30">30 minutes</option>\r\n          <option value="45">45 minutes</option>\r\n          <option value="60">1 hour</option>\r\n        </select>\r\n        <select class="form-control form-inline" id="climb-duration" name="climb-duration">\r\n          <option value="null">I\'m climbing for:</option>\r\n          <option value="30">30 minutes</option>\r\n          <option value="60">1 hour</option>\r\n          <option value="90">1.5 hours</option>\r\n          <option value="120">2 hours</option>\r\n        </select>\r\n        <textarea class="form-control" rows="3" type="text" id="climb-details" name="climb-details" placeholder="Leave some details here..."></textarea>\r\n        <br>\r\n        <button class="btn btn-primary" id="posting-submit-button">Climb on!</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n  <div class="panel panel-default">\r\n    <div class="panel-heading">\r\n      <p class="panel-title">\r\n        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">\r\n          Search by Gym\r\n        </a>\r\n      </p>\r\n    </div>\r\n    <div id="collapseThree" class="panel-collapse collapse">\r\n      <div class="panel-body">\r\n        <ul>\r\n          <li><a href="#circuit-ne">The Circuit NE</a></li>\r\n          <li><a href="#circuit-sw">The Circuit SW</a></li>\r\n          <li><a href="#prg">Portland Rock Gym</a></li>\r\n          <li>&nbsp;</li>\r\n          <li><a href="#">Reset</a></li>\r\n        </ul>                \r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'})},{"handlebars/runtime":18}],10:[function(e,t){var n=e("handlebars/runtime").default.template;t.exports=n(function(e,t,n,a,r){function i(e,t){var a,r="";return r+='\n  <div class="panel-body">\n    ',a=n.each.call(e,e&&e.replies,{hash:{},inverse:h.noop,fn:h.program(2,o,t),data:t}),(a||0===a)&&(r+=a),r+="\n  </div>\n  "}function o(e,t){var a,r,i="";return i+='\n    <div class="media panel-reply">\n      <a class="pull-left" href="#">\n        <img class="media-object" src="',(r=n.userImg)?a=r.call(e,{hash:{},data:t}):(r=e&&e.userImg,a=typeof r===d?r.call(e,{hash:{},data:t}):r),i+=u(a)+'">\n      </a>\n      <div class="media-body panel-small-text">\n        <p><a href="#"><strong class="media-heading">',(r=n.userName)?a=r.call(e,{hash:{},data:t}):(r=e&&e.userName,a=typeof r===d?r.call(e,{hash:{},data:t}):r),i+=u(a)+"</strong></a> ",(r=n.message)?a=r.call(e,{hash:{},data:t}):(r=e&&e.message,a=typeof r===d?r.call(e,{hash:{},data:t}):r),i+=u(a)+"</p>\n        <em><p>",(r=n.time)?a=r.call(e,{hash:{},data:t}):(r=e&&e.time,a=typeof r===d?r.call(e,{hash:{},data:t}):r),i+=u(a)+"</p></em>\n      </div>                    \n    </div>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var l,s,c,p="",d="function",u=this.escapeExpression,h=this,m=n.helperMissing;return p+=u((s=n.view||t&&t.view,c={hash:{},data:r},s?s.call(t,t&&t.collection,c):m.call(t,"view",t&&t.collection,c)))+'\n<div class="panel panel-default panel-posting">\n  \n  <div class="panel-heading">                  \n    <div class="row panel-small-text">\n      <a href="#" id="test"><img src="',(s=n.userImg)?l=s.call(t,{hash:{},data:r}):(s=t&&t.userImg,l=typeof s===d?s.call(t,{hash:{},data:r}):s),p+=u(l)+'" /></a>\n      <p>\n        <a href="#"><strong>',(s=n.userName)?l=s.call(t,{hash:{},data:r}):(s=t&&t.userName,l=typeof s===d?s.call(t,{hash:{},data:r}):s),p+=u(l)+"</strong></a>\n        <em><br>@ ",(s=n.climbGym)?l=s.call(t,{hash:{},data:r}):(s=t&&t.climbGym,l=typeof s===d?s.call(t,{hash:{},data:r}):s),p+=u(l)+"<br>in ",(s=n.climbEta)?l=s.call(t,{hash:{},data:r}):(s=t&&t.climbEta,l=typeof s===d?s.call(t,{hash:{},data:r}):s),p+=u(l)+" minutes for a ",(s=n.climbDuration)?l=s.call(t,{hash:{},data:r}):(s=t&&t.climbDuration,l=typeof s===d?s.call(t,{hash:{},data:r}):s),p+=u(l)+' minute session.</em> \n      </p>\n    </div>\n    <div class="row panel-message">\n      <p>',(s=n.climbDetails)?l=s.call(t,{hash:{},data:r}):(s=t&&t.climbDetails,l=typeof s===d?s.call(t,{hash:{},data:r}):s),p+=u(l)+"</p>\n    </div>\n  </div>\n\n  ",l=n["if"].call(t,t&&t.replies,{hash:{},inverse:h.noop,fn:h.program(1,i,r),data:r}),(l||0===l)&&(p+=l),p+='\n  \n  <div class="panel-footer">\n    <textarea class="form-control posting-reply" rows="1" type="text" name="posting-reply" placeholder="Maybe we should meet up..."></textarea>\n    <button class="btn btn-default posting-reply-button" type="submit">Reply</button>\n  </div>\n\n</div>'})},{"handlebars/runtime":18}],11:[function(e,t){var n=e("handlebars/runtime").default.template;t.exports=n(function(e,t,n,a,r){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),r=r||{};var i,o,l="",s="function",c=this.escapeExpression;return l+='<div class="panel-heading">\n      <p class="panel-title sidebar-intro panel-small-text">\n        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">\n          <img src="',(o=n.avatar)?i=o.call(t,{hash:{},data:r}):(o=t&&t.avatar,i=typeof o===s?o.call(t,{hash:{},data:r}):o),l+=c(i)+'">\n      ',(o=n.displayName)?i=o.call(t,{hash:{},data:r}):(o=t&&t.displayName,i=typeof o===s?o.call(t,{hash:{},data:r}):o),l+=c(i)+'<br><i class="fa fa-caret-down fa-lg"></i>\n        </a>\n      </p>\n    </div>\n    <div id="collapseOne" class="panel-collapse collapse">\n      <div class="panel-body sidebar-body">\n        <!-- <p>User data stuff in this space</p> -->\n        <a href="/logout">Logout</a>\n      </div>\n    </div>'})},{"handlebars/runtime":18}],12:[function(e,t,n){"use strict";var a=e("./handlebars/base"),r=e("./handlebars/safe-string")["default"],i=e("./handlebars/exception")["default"],o=e("./handlebars/utils"),l=e("./handlebars/runtime"),s=function(){var e=new a.HandlebarsEnvironment;return o.extend(e,a),e.SafeString=r,e.Exception=i,e.Utils=o,e.VM=l,e.template=function(t){return l.template(t,e)},e},c=s();c.create=s,n["default"]=c},{"./handlebars/base":13,"./handlebars/exception":14,"./handlebars/runtime":15,"./handlebars/safe-string":16,"./handlebars/utils":17}],13:[function(e,t,n){"use strict";function a(e,t){this.helpers=e||{},this.partials=t||{},r(this)}function r(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new l("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var a=n.inverse||function(){},r=n.fn;return u(t)&&(t=t.call(this)),t===!0?r(this):t===!1||null==t?a(this):d(t)?t.length>0?e.helpers.each(t,n):a(this):r(t)}),e.registerHelper("each",function(e,t){var n,a=t.fn,r=t.inverse,i=0,o="";if(u(e)&&(e=e.call(this)),t.data&&(n=v(t.data)),e&&"object"==typeof e)if(d(e))for(var l=e.length;l>i;i++)n&&(n.index=i,n.first=0===i,n.last=i===e.length-1),o+=a(e[i],{data:n});else for(var s in e)e.hasOwnProperty(s)&&(n&&(n.key=s,n.index=i,n.first=0===i),o+=a(e[s],{data:n}),i++);return 0===i&&(o=r(this)),o}),e.registerHelper("if",function(e,t){return u(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return u(e)&&(e=e.call(this)),o.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var a=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(a,t)})}function i(e,t){f.log(e,t)}var o=e("./utils"),l=e("./exception")["default"],s="1.3.0";n.VERSION=s;var c=4;n.COMPILER_REVISION=c;var p={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=p;var d=o.isArray,u=o.isFunction,h=o.toString,m="[object Object]";n.HandlebarsEnvironment=a,a.prototype={constructor:a,logger:f,log:i,registerHelper:function(e,t,n){if(h.call(e)===m){if(n||t)throw new l("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){h.call(e)===m?o.extend(this.partials,e):this.partials[e]=t}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(f.level<=e){var n=f.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};n.logger=f,n.log=i;var v=function(e){var t={};return o.extend(t,e),t};n.createFrame=v},{"./exception":14,"./utils":17}],14:[function(e,t,n){"use strict";function a(e,t){var n;t&&t.firstLine&&(n=t.firstLine,e+=" - "+n+":"+t.firstColumn);for(var a=Error.prototype.constructor.call(this,e),i=0;i<r.length;i++)this[r[i]]=a[r[i]];n&&(this.lineNumber=n,this.column=t.firstColumn)}var r=["description","fileName","lineNumber","message","name","number","stack"];a.prototype=new Error,n["default"]=a},{}],15:[function(e,t,n){"use strict";function a(e){var t=e&&e[0]||1,n=d;if(t!==n){if(n>t){var a=u[n],r=u[t];throw new p("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+r+").")}throw new p("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){if(!t)throw new p("No environment passed to template");var n=function(e,n,a,r,i,o){var l=t.VM.invokePartial.apply(this,arguments);if(null!=l)return l;if(t.compile){var s={helpers:r,partials:i,data:o};return i[n]=t.compile(e,{data:void 0!==o},t),i[n](a,s)}throw new p("The partial "+n+" could not be compiled when running in runtime-only mode")},a={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var a=this.programs[e];return n?a=o(e,t,n):a||(a=this.programs[e]=o(e,t)),a},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},c.extend(n,t),c.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,r){r=r||{};var i,o,l=r.partial?r:t;r.partial||(i=r.helpers,o=r.partials);var s=e.call(a,l,n,i,o,r.data);return r.partial||t.VM.checkRevision(a.compilerInfo),s}}function i(e,t,n){var a=Array.prototype.slice.call(arguments,3),r=function(e,r){return r=r||{},t.apply(this,[e,r.data||n].concat(a))};return r.program=e,r.depth=a.length,r}function o(e,t,n){var a=function(e,a){return a=a||{},t(e,a.data||n)};return a.program=e,a.depth=0,a}function l(e,t,n,a,r,i){var o={partial:!0,helpers:a,partials:r,data:i};if(void 0===e)throw new p("The partial "+t+" could not be found");return e instanceof Function?e(n,o):void 0}function s(){return""}var c=e("./utils"),p=e("./exception")["default"],d=e("./base").COMPILER_REVISION,u=e("./base").REVISION_CHANGES;n.checkRevision=a,n.template=r,n.programWithDepth=i,n.program=o,n.invokePartial=l,n.noop=s},{"./base":13,"./exception":14,"./utils":17}],16:[function(e,t,n){"use strict";function a(e){this.string=e}a.prototype.toString=function(){return""+this.string},n["default"]=a},{}],17:[function(e,t,n){"use strict";function a(e){return s[e]||"&amp;"}function r(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function i(e){return e instanceof l?e.toString():e||0===e?(e=""+e,p.test(e)?e.replace(c,a):e):""}function o(e){return e||0===e?h(e)&&0===e.length?!0:!1:!0}var l=e("./safe-string")["default"],s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,p=/[&<>"'`]/;n.extend=r;var d=Object.prototype.toString;n.toString=d;var u=function(e){return"function"==typeof e};u(/x/)&&(u=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var u;n.isFunction=u;var h=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===d.call(e):!1};n.isArray=h,n.escapeExpression=i,n.isEmpty=o},{"./safe-string":16}],18:[function(e,t){t.exports=e("./dist/cjs/handlebars.runtime")},{"./dist/cjs/handlebars.runtime":12}]},{},[2]);